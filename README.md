# k8s-practice

## このリポジトリの再現手順


## このリポジトリの動作確認


## k8sについて
### motivation
- アプリケーションはなるべく複数マシンに分けてデプロイし、障害が起きても安定稼働できるようにしたい
- アプリケーションごとに「このアプリケーションは負荷が高そうなので高スペックのマシンで稼働させたい」などマシンへのスペック要件が異なる

### 概要
k8sデプロイするとクラスターが展開される

k8sクラスターはコンテナ化されたアプリケーションを実行するノード（マシン）の集合のことで、ワーカーノードとマスターノードから構成される
  - ワーカーノードは、Pod（k8s上のデプロイの最小単位で、1つ以上のコンテナを持つ）をホストする
  - マスターノードは、クラスター内のワーカーノードとPodを管理する
<img width="1238" alt="スクリーンショット 2021-09-04 12 20 31" src="https://user-images.githubusercontent.com/53222150/132080790-31a7a88b-8cd1-486a-a9a8-d0800b0f09cb.png">

### マスターノードについて
5つのコンポーネントから構成される
- kube-apiserver

  kubeletとのやりとりなどクラスター内部や外部とのやり取りをするインターフェース
- etcd

　k8sクラスターの状態を保存するためのkey-valueストア
- kube-scheduler

　アプリケーションをどのワーカーノードで実行するのかスケジューリングする
- kube-controller-manager

　理想状態と現状を比較し、違いがある場合には現状に近づけようとする
- cloud-controller-manager

　cloud関連（ローカルだと触れない）

### ワーカーノードについて
2つのコンポーネントから構成される
- kubelet

　マスターノード（kube-apiserver）と連絡を取り、ワーカーノードのコンテナを停止したり起動したり、その情報をマスターノードに伝達する
- kube-proxy

　ネットワークルールをメンテナンス役割があり、これによってPodへのネットワーク通信が可能になる
 
 
## k8sリソース

## kubectlコマンド
kubectl（クーべコントロール）によって、yamlやコマンドをAPIリクエストに変えてkube-apiserverにHTTPリクエストを送る
